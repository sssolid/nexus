REFERENCE TABLES
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/Year --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/Make --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/Model --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/SubModel --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/Region --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/VehicleType --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/VehicleTypeGroup --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/Class --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/Abbreviation --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/PublicationStage --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/Mfr --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/MfrBodyCode --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/BodyType --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/BodyNumDoors --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/BedType --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/BedLength --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/WheelBase --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/Transmission --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/TransmissionMfrCode --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/ElecControlled --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/PowerOutput --asof 2025-12-18 --pagesize 1000

ATTRIBUTE TABLES
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/DriveType --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/FuelType --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/TransmissionType --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/TransmissionControlType --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/TransmissionNumSpeeds --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/SteeringType --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/SteeringSystem --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/BrakeType --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/BrakeSystem --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/BrakeABS --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/SpringType --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/Valves --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/Aspiration --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/CylinderHeadType --asof 2025-12-18 --pagesize 1000

CONFIGURATION TABLES
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/EngineBlock --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/EngineBoreStroke --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/EngineBase --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/EngineDesignation --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/EngineVersion --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/EngineVin --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/EngineConfig --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/TransmissionBase --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/BrakeConfig --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/SteeringConfig --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/SpringTypeConfig --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/BodyStyleConfig --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/BedConfig --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/FuelDeliveryConfig --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/FuelDeliveryType --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/FuelDeliverySubType --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/FuelSystemControlType --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/FuelSystemDesign --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/IgnitionSystemType --asof 2025-12-18 --pagesize 1000

CORE VEHICLES (HIGH VOLUME)
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/BaseVehicle --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/Vehicle --asof 2025-12-18 --pagesize 1000

FITMENT TABLES (VERY LARGE)
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/VehicleToEngineConfig --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/VehicleToTransmission --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/VehicleToBodyConfig --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/VehicleToDriveType --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/VehicleToBedConfig --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/VehicleToWheelBase --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/VehicleToClass --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/VehicleToBrakeConfig --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/VehicleToBodyStyleConfig --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/VehicleToSpringTypeConfig --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/VehicleToSteeringConfig --asof 2025-12-18 --pagesize 1000
- docker compose exec web python manage.py ingest_autocare --db vcdb /vcdb/VehicleToMfrBodyCode --asof 2025-12-18 --pagesize 1000

Skip /vcdb/equipment and /vcdb/VCdbChanges

# Create a raw dump of the raw data
docker compose exec db pg_dump -U postgres -Fc -t autocare_autocarerawrecord nexus > data/autocare/raw/vcdb_raw_$(date +%F).dump
# IF YOU NEED TO IMPORT THIS DUMP
cat data/autocare/raw/vcdb_raw_2025-12-15.dump | \
docker compose exec -T db pg_restore \
  -U postgres \
  -d nexus \
  --clean \
  --if-exists


# Create the staging database to generate django models from
# MAKE SURE THE SCHEMA FROM AUTOCARE HAS QUOTES AROUND THE TABLE NAMES AND FIELDS (IT DOESN'T ON ALL OF THEM)
docker compose exec web psql -h db -U postgres -d nexus -v ON_ERROR_STOP=1 -c "DROP SCHEMA IF EXISTS staging CASCADE; CREATE SCHEMA staging;"
docker compose exec web psql -h db -U postgres -d nexus -v ON_ERROR_STOP=1 -c "SET search_path TO staging;" -f /app/src/data/autocare/db_schema/vcdb_schema.sql

# Generate the django models
# Before doing so check the models as there are some manual changes that need to be done
# For example:
# v_cdb_changes.py should be vcdb_changes.py
#   the id field should be vcdb_change_id = models.IntegerField(db_column='ID')
# vehicle_to_class.py:
# class_ should be...
# vehicle_class = models.ForeignKey('VehicleClass', db_column='ClassID', db_index=True, on_delete=models.DO_NOTHING)
# THE FUCKING CODE IS NOT DOING CamelCase PROPERLY AND NEEDS TO BE FIXED IMMEDIATELY
docker compose exec web python manage.py generate_autocare_models

# Verify the models
docker compose exec web python manage.py validate_autocare_models

# Generate the migrations
docker compose exec web python manage.py makemigrations autocare

# Migrate the data
docker compose exec web python manage.py migrate autocare